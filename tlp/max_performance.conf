# ==============================================================================
# /etc/tlp-profiles/performance-quiet.conf
# ==============================================================================
# PROFILE: PERFORMANCE QUIET - Performance with Quiet Fans
# AC:  High performance, quieter fan curve
# BAT: Performance with reasonable power management
# Expected: 4-6 hours battery life
# ==============================================================================

# --- CPU Settings for 1260P ---
# Use balanced platform profile for quieter fans while maintaining performance via EPP
PLATFORM_PROFILE_ON_AC=balanced
PLATFORM_PROFILE_ON_BAT=balanced

# Use balance_performance EPP for good performance with less aggressive behavior
CPU_ENERGY_PERF_POLICY_ON_AC=balance_performance
CPU_ENERGY_PERF_POLICY_ON_BAT=balance_performance

# No performance caps
CPU_MIN_PERF_ON_AC=0
CPU_MAX_PERF_ON_AC=100
CPU_MIN_PERF_ON_BAT=0
CPU_MAX_PERF_ON_BAT=100

# Turbo Boost enabled
CPU_BOOST_ON_AC=1
CPU_BOOST_ON_BAT=1

# Dynamic boost for responsive performance
CPU_HWP_DYN_BOOST_ON_AC=1
CPU_HWP_DYN_BOOST_ON_BAT=1

# --- Intel Iris Xe Graphics ---
INTEL_GPU_MIN_FREQ_ON_AC=300
INTEL_GPU_MIN_FREQ_ON_BAT=300
INTEL_GPU_MAX_FREQ_ON_AC=1450
INTEL_GPU_MAX_FREQ_ON_BAT=1200
INTEL_GPU_BOOST_FREQ_ON_AC=1500
INTEL_GPU_BOOST_FREQ_ON_BAT=1250

# --- Storage (NVMe SSD) ---
DISK_DEVICES="nvme0n1"
AHCI_RUNTIME_PM_ON_AC=on
AHCI_RUNTIME_PM_ON_BAT=auto
AHCI_RUNTIME_PM_TIMEOUT=20

DISK_IDLE_SECS_ON_AC=0
DISK_IDLE_SECS_ON_BAT=3

# --- PCIe Power Management ---
PCIE_ASPM_ON_AC=default
PCIE_ASPM_ON_BAT=default

RUNTIME_PM_ON_AC=auto
RUNTIME_PM_ON_BAT=auto

# --- Network ---
WIFI_PWR_ON_AC=off
WIFI_PWR_ON_BAT=off

# --- USB Power Saving ---
USB_AUTOSUSPEND=1
USB_EXCLUDE_BTUSB=1
USB_EXCLUDE_PHONE=1
USB_EXCLUDE_PRINTER=1
USB_EXCLUDE_WWAN=1

# --- Audio ---
SOUND_POWER_SAVE_ON_AC=0
SOUND_POWER_SAVE_ON_BAT=1
SOUND_POWER_SAVE_CONTROLLER=Y

# --- Radio Devices ---
DEVICES_TO_DISABLE_ON_STARTUP=""
DEVICES_TO_ENABLE_ON_STARTUP="wifi bluetooth"

RESTORE_DEVICE_STATE_ON_STARTUP=0
